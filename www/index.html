<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BKL Pro Optimizer</title>
    <script src="https://fengari.js.org/dist/fengari-web.js" type="text/javascript"></script>
    <style>
        body { background: #050505; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; text-align: center; overflow: hidden; }
        
        /* BKL Splash Screen */
        #splash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 9999;
            transition: opacity 1s ease;
        }
        .bkl-logo { color: #5C6AC4; font-size: 3.5rem; font-weight: bold; letter-spacing: 12px; text-shadow: 0 0 20px #5C6AC4; }
        .loader { border: 3px solid #111; border-top: 3px solid #5C6AC4; border-radius: 50%; width: 45px; height: 45px; animation: spin 1s linear infinite; margin-top: 25px; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Main UI Container */
        .app-content { padding: 20px; height: 100vh; display: flex; flex-direction: column; box-sizing: border-box; }
        h1 { color: #5C6AC4; font-size: 1.6rem; margin: 0; }
        .dev-tag { color: #555; font-size: 0.7rem; letter-spacing: 2px; margin-bottom: 15px; }
        
        /* Slider Styling */
        .slider-container { margin: 15px 0; padding: 15px; background: #111; border-radius: 12px; border: 1px solid #222; }
        .slider-container p { margin: 0 0 10px 0; font-size: 0.9rem; color: #ccc; }
        .slider {
            width: 100%; -webkit-appearance: none; height: 6px;
            background: #333; border-radius: 5px; outline: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none; width: 22px; height: 22px;
            background: #5C6AC4; border-radius: 50%; cursor: pointer;
            box-shadow: 0 0 10px rgba(92, 106, 196, 0.6);
        }

        /* Terminal Styling */
        #terminal {
            flex-grow: 1; background: #000; color: #00ffcc; font-family: 'Courier New', monospace;
            padding: 15px; border: 1px solid #222; border-radius: 8px;
            text-align: left; font-size: 11px; overflow-y: auto; box-shadow: inset 0 0 10px #000;
        }
        
        /* Button Styling */
        .launch-btn {
            background: linear-gradient(45deg, #5C6AC4, #3f4a91);
            color: white; border: none; padding: 16px; font-weight: bold;
            border-radius: 12px; margin-top: 15px; font-size: 1rem; cursor: pointer;
            box-shadow: 0 4px 15px rgba(92, 106, 196, 0.3);
            text-transform: uppercase; letter-spacing: 1px;
        }
        .launch-btn:active { transform: scale(0.98); background: #00ffcc; color: black; }
    </style>
</head>
<body>

    <div id="splash">
        <div class="bkl-logo">BKL</div>
        <div class="loader"></div>
        <p style="color: #444; margin-top: 15px; font-size: 10px; letter-spacing: 2px;">SECURE BOOT INITIALIZING</p>
    </div>

    <div class="app-content">
        <h1>PRO OPTIMIZER</h1>
        <div class="dev-tag">DEVELOPED BY BKL</div>

        <div class="slider-container">
            <p>Injection Power: <span id="pow-val" style="color:#5C6AC4; font-weight:bold;">50</span>%</p>
            <input type="range" min="1" max="100" value="50" class="slider" id="sensSlider" 
                   oninput="document.getElementById('pow-val').innerText = this.value">
        </div>

        <div id="terminal">System: Device Ready<br>[BKL-CORE] Monitoring model.stl...</div>

        <button class="launch-btn" onclick="executeBKL()">Start Injection</button>
    </div>

    <script>
        const term = document.getElementById('terminal');

        // Handle Splash Screen Fade-out
        window.onload = () => {
            setTimeout(() => {
                const s = document.getElementById('splash');
                s.style.opacity = '0';
                setTimeout(() => s.style.display = 'none', 1000);
            }, 3000);
        };

        // Utility to write to the terminal
        function writeLog(msg) {
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
            term.innerHTML += `<br>[${time}] > ${msg}`;
            term.scrollTop = term.scrollHeight;
        }

        // Main Execution Logic
        async function executeBKL() {
            const power = document.getElementById('sensSlider').value;
            writeLog(`BKL Engine: Locking power at ${power}%...`);
            
            try {
                // Fetch the model.stl file
                const res = await fetch('model.stl');
                if (!res.ok) throw new Error("model.stl not found in folder!");
                const luaCode = await res.text();
                
                writeLog("Parsing obfuscated bytecode...");
                
                // Initialize Fengari Lua Virtual Machine
                const L = fengari.L;
                
                // Inject the Power variable so the script can use it
                const luaWithVariable = `BKL_POWER = ${power}\n` + luaCode;
                
                // Run the script
                const status = fengari.lauxlib.luaL_dostring(L, fengari.to_luastring(luaWithVariable));
                
                if (status === 0) {
                    writeLog(`SUCCESS: Injection Complete (${power}%)`);
                } else {
                    writeLog("VM ERROR: Script logic incompatible with Android shell.");
                }
            } catch (e) {
                writeLog("CRITICAL ERROR: " + e.message);
            }
        }
    </script>
</body>
</html>